!function(e){var t=function(){frontPageContentCoverCombinedLightness>=.5?e(".js-background-type").addClass("light-background").removeClass("dark-background"):e(".js-background-type").addClass("dark-background").removeClass("light-background")},n=function(t,n){return function(t,n){if(t&&n){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,n){t[e]=+n})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(n,function(e,t){n[e]=+t})),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var o=[0,0,0,0];return o[3]=1-(1-n[3])*(1-t[3]),0===o[3]&&(o[3]=1e-6),o[0]=Math.min(n[0]*n[3]/o[3]+t[0]*t[3]*(1-n[3])/o[3],255),o[1]=Math.min(n[1]*n[3]/o[3]+t[1]*t[3]*(1-n[3])/o[3],255),o[2]=Math.min(n[2]*n[3]/o[3]+t[2]*t[3]*(1-n[3])/o[3],255),e.map(o,function(e){return Math.floor(e)})}}(t||[255,255,255,1],n||[255,255,255,1])},o=function(e,t){var o=n(e,t);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100};window.site=e.extend(window.site||{},{frontPageContentCoverBgPreview:function(n,a){var r=e(".js-bgpicker-cover-image").css("background-image"),g=n.imageSizes?function(e,t){for(var n,o=0,a=e.length;o<a;o++){if(e[o].width<t)return n||e[o];n=e[o]}return e[e.length-1]}(n.imageSizes,e(window).width()):null,i=n.image&&""!==n.image?"url("+g.url+")":"none",s=n.imageSizes&&""!==n.imageSizes?n.imageSizes:null,l=n.color&&""!==n.color?n.color:"rgba(0,0,0,0)",c=(n.colorData&&""!==n.colorData&&n.colorData.lightness,e("<img>")),d=e("<canvas>"),f=n.image&&""!==n.image?n.image:null;f?function(e,t){for(var n=e.length;n--;)if(t.indexOf(e[n].url.trim())>-1)return!0;return!1}(s,r)?(frontPageContentCoverCombinedLightness=o(frontPageContentBg.frontPageContentBgImageColor,l),t()):(c.attr("src",f.replace(/.*\/(photos|voogstock)/g,"/photos")),c.on("load",function(){ColorExtract.extract(c[0],d[0],function(e){frontPageContentBg.frontPageContentBgImageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",frontPageContentCoverCombinedLightness=o(frontPageContentBg.frontPageContentBgImageColor,l),t()})})):(frontPageContentCoverCombinedLightness=o("rgba(255,255,255,1)",l),t()),e(a).find(".js-bgpicker-cover-image").css({"background-image":i}),e(a).find(".js-bgpicker-cover-color").css({"background-color":l})},frontPageContentCoverBgCommit:function(t,n){var o=e.extend(!0,{},t);o.image=t.image||"",o.imageSizes=function(e){return null==e||"string"==typeof e&&e.match(/^[\\'"]+$/)?"":e}(t.imageSizes),o.color=t.color||"rgba(255,255,255,0)",o.combinedLightness=frontPageContentCoverCombinedLightness,pageData.set(n,o)},handleFrontPageContentCoverColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},bindCustomTexteditorStyles:function(e){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:e,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])},toggleFlags:function(){e(".js-option-toggle-flags").on("click",function(t){if(t.stopPropagation(),e(this).hasClass("js-flag-disable-btn"))var n=!1;else n=!0;siteData.set("flags_state",n),e(this).toggleClass("js-flag-disable-btn"),e(".js-menu-lang").toggleClass("flags-enabled flags-disabled")})}})}(jQuery);